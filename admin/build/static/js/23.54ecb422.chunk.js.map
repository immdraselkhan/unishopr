{"version":3,"sources":["container/clients/partners/list.js","container/clients/partners/filter.js","container/clients/partners/index.js","redux/clients/partners/actionCreator.js"],"names":["PartnerList","state","setState","filters","setFilters","isLoading","partners","approveRequest","history","useHistory","columns","title","className","render","partner","photo","src","target","to","_id","firstName","lastName","phone","country","code","dataIndex","key","services","status","Scope","checkScopes","size","type","icon","name","onClick","Alert","confirm","action","partnerId","push","headerButtons","filterVisible","ghost","subTitle","total","onBack","window","back","extra","rowKey","bordered","loading","dataSource","data","pagination","current","page","onChange","pageNo","perPageNo","perPage","PartnersFilter","filter","initialFilters","handleSubmit","useDispatch","toString","number","email","gender","resetFilters","resetFields","footerButtons","htmlType","disabled","form","md","visible","onCancel","footer","width","labelCol","span","wrapperCol","id","validateMessages","required","onFinish","Item","initialValue","rules","label","placeholder","allowClear","Option","value","PartnersData","dispatch","useSelector","utilities","clientsPartners","utilitiesPartners","useForm","useState","showFilter","reqModalVisible","modalType","user","useEffect","fetchPartners","fetchData","then","r","getPartners","users","fetchUsers","fetchUtilitiesPartners","fetchPartnersAction","actions","queries","req","getRequest","url","Constants","CLIENTS","auth","cb","putRequest","body"],"mappings":"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","file":"static/js/23.54ecb422.chunk.js","sourcesContent":["import React from \"react\";\nimport { Avatar, Button as AntButton, PageHeader, Table } from \"antd\";\nimport { Scope } from \"../../../services/scopeService\";\nimport FontAwesome from \"react-fontawesome\";\nimport { Alert } from \"../../../services/alertService\";\nimport { Constants } from \"../../../config/constants\";\nimport { useHistory } from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport { Button } from \"../../../components/buttons/buttons\";\nimport FeatherIcon from \"feather-icons-react\";\n\nconst PartnerList = (\n    {\n        state,\n        setState,\n        filters,\n        setFilters,\n        isLoading,\n        partners,\n        approveRequest\n    }\n) => {\n    const history = useHistory();\n\n    const columns = [\n        {\n            title: 'Partner',\n            className: \"pointer text-default\",\n            render: (partner) => <span className=\"d-flex\">\n                {/* <Avatar src={`${Constants.S3_BASE_URL(partner.photo)}`} /> */}\n                {\n                    partner?.photo ? <Avatar src={partner?.photo} /> : <Avatar src={\"https://cdn0.iconfinder.com/data/icons/user-pictures/100/matureman1-512.png\"} />\n                }\n                <span className=\"pl-5\">\n                    <Link target=\"_blank\" to={`/admin/client/users-profile/${partner._id}`}>\n                        {`${partner.firstName} ${partner.lastName}`}<br />\n                        {partner.phone.country.code}{partner.phone.phone}\n                    </Link>\n                </span>\n            </span>\n        },\n        {\n            title: 'Email',\n            dataIndex: 'email',\n            key: 'email',\n        },\n        {\n            title: 'Gender',\n            dataIndex: 'gender',\n            key: 'gender',\n        },\n        {\n            title: 'Status',\n            render: (key) => key.services?.partner?.status ? key.services?.partner?.status : 'N/A'\n        },\n        {\n            title: <div className=\"text-right\">Action</div>,\n            render: (key) => <div className=\"text-right\">\n                {key.services?.partner?.status && key.services?.partner?.status === \"requested\" && Scope.checkScopes(['clients_partners_update']) && (\n                    <AntButton\n                        size=\"small\"\n                        type=\"ghost\"\n                        className=\"minimum-mr color-success border-success\"\n                        icon={<FontAwesome name={\"check\"} />}\n                        onClick={() => Alert.confirm({ action: approveRequest({ partnerId: key._id }) })}\n                    />\n                )}\n                {Scope.checkScopes(['clients_users_index']) && (\n                    <AntButton\n                        size=\"small\"\n                        type=\"ghost\"\n                        className=\"color-primary border-primary\"\n                        icon={<FontAwesome name={\"info\"} />}\n                        onClick={() => history.push('/admin/client/users-profile/' + key._id)}\n                    />\n                )}\n            </div>\n        },\n    ];\n\n    const headerButtons = [\n        <div key=\"1\" className=\"page-header-action\">\n            {Scope.checkScopes(['clients_partners_view']) && (\n                <Button\n                    size=\"medium\"\n                    className=\"minimum-mr\"\n                    type=\"secondary\"\n                    onClick={() => setState({ ...state, filterVisible: true })}\n                >\n                    <FeatherIcon icon=\"filter\" size={14} />\n                    Filters\n                </Button>\n            )}\n        </div>,\n    ]\n\n    return (\n        <div>\n            <PageHeader\n                ghost={false}\n                title=\"Partners\"\n                subTitle={`List of all ${partners?.total} Partners.`}\n                onBack={() => window.history.back()}\n                extra={headerButtons}\n            >\n                <Table\n                    rowKey=\"_id\"\n                    bordered={false}\n                    className=\"table-responsive\"\n                    loading={isLoading}\n                    dataSource={partners.data}\n                    columns={columns}\n                    // scroll={{ y: window.innerHeight / 2  }}\n                    pagination={{\n                        total: partners.total,\n                        current: partners.page,\n                        onChange: async (pageNo, perPageNo) => await setFilters({ ...filters, page: pageNo, perPage: perPageNo }),\n                    }}\n                />\n            </PageHeader>\n        </div>\n    )\n}\n\nexport default PartnerList;\n","import React from \"react\";\nimport {Button} from \"../../../components/buttons/buttons\";\nimport {Col, Form, Input, Modal, Row, Select} from \"antd\";\nimport {useDispatch} from \"react-redux\";\n\nconst PartnersFilter = (\n    {\n        filter,\n        state,\n        setState,\n        initialFilters,\n        filters,\n        setFilters,\n        isLoading\n    }\n) => {\n    const dispatch = useDispatch()\n    const layout = { labelCol: { span: 8 }, wrapperCol: { span: 16 }}\n    const validateMessages = { required: '${label} is required!' };\n\n    const handleSubmit = async (data) => {\n        await setFilters({\n            ...filters,\n            ...data,\n            name: data.name.toString(),\n            phone: data.number.toString(),\n            email: data.email.toString(),\n            gender: data.gender.toString(),\n        })\n        await setState({...state, filterVisible: false})\n    };\n\n    const resetFilters = async () => {\n        await setFilters(initialFilters);\n        await filter.resetFields();\n    }\n\n    const footerButtons = [\n        <Button\n            key=\"reset-button\"\n            htmlType=\"button\"\n            type=\"secondary\"\n            disabled={isLoading}\n            size=\"medium\"\n            onClick={resetFilters}\n        >\n            {isLoading ? 'Loading...' : 'Reset'}\n        </Button>,\n        <Button\n            form=\"partnersFilterForm\"\n            key=\"submit-button\"\n            htmlType=\"submit\"\n            type=\"primary\"\n            disabled={isLoading}\n            size=\"medium\"\n        >\n            {isLoading ? 'Loading...' : 'Submit'}\n        </Button>\n    ];\n\n    return (\n        <Col md={12}>\n            <Modal\n                type={\"primary\"}\n                title=\"Partners Filter\"\n                visible={state.filterVisible}\n                onCancel={() => setState({...state, filterVisible: false})}\n                footer={footerButtons}\n                width={800}\n            >\n                <Form\n                    {...layout}\n                    name={'partnersFilter'}\n                    form={filter}\n                    id={'partnersFilterForm'}\n                    className=\"my-form\"\n                    validateMessages={validateMessages}\n                    onFinish={handleSubmit}\n                >\n                    <Row>\n                        <Col md={12}>\n                            <Form.Item\n                                name=\"name\"\n                                initialValue={filters?.name ? filters.name : \"\"}\n                                rules={[{ required: false }]}\n                                label=\"Name\"\n                            >\n                                <Input  placeholder=\"Name\"/>\n                            </Form.Item>\n                        </Col>\n                        <Col md={12}>\n                            <Form.Item\n                                name=\"email\"\n                                initialValue={filters?.email ? filters.email : \"\"}\n                                rules={[{ required: false }]}\n                                label=\"Email\"\n                            >\n                                <Input placeholder=\"Email\"/>\n                            </Form.Item>\n                        </Col>\n                        <Col md={12}>\n                            <Form.Item\n                                name=\"number\"\n                                initialValue={filters?.phone ? filters.phone : ''}\n                                rules={[{ required: false }]}\n                                label=\"Mobile Number\"\n                            >\n                                <Input placeholder=\"Mobile Number\"/>\n                            </Form.Item>\n                        </Col>\n                        <Col md={12}>\n                            <Form.Item\n                                name=\"gender\"\n                                initialValue={filters?.gender ? filters.gender : \"\"}\n                                rules={[{ required: false }]}\n                                label=\"Gender\"\n                            >\n                                <Select\n                                    allowClear\n                                    loading={isLoading}\n                                    initialValue={filters?.gender ? filters.gender : \"\"}\n                                >\n                                    <Select.Option value=\"\">Gender</Select.Option>\n                                    <Select.Option value=\"male\">Male</Select.Option>\n                                    <Select.Option value=\"female\">Female</Select.Option>\n                                    <Select.Option value=\"other\">Other</Select.Option>\n                                </Select>\n                            </Form.Item>\n                        </Col>\n                    </Row>\n                </Form>\n            </Modal>\n        </Col>\n    )\n}\n\nexport default PartnersFilter;\n","import React, {useEffect, useState} from 'react';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Main} from \"../../styled\";\nimport PartnerList from \"./list\";\nimport { fetchPartners, approveRequest } from \"../../../redux/clients/partners/actionCreator\";\nimport PartnersFilter from \"./filter\";\nimport {fetchPartners as fetchUtilitiesPartners} from \"../../../redux/utilities/actionCreator\";\nimport {Form} from \"antd\";\n\nconst PartnersData = () => {\n    const dispatch = useDispatch();\n    const isLoading = useSelector(state => state.utilities.loading);\n    const partners = useSelector(state => state.clientsPartners.partners);\n    const utilitiesPartners = useSelector(state => state.utilities.partners);\n\n    const [filter] = Form.useForm()\n    const [state, setState] = useState({\n        visible: false,\n        showFilter: false,\n        reqModalVisible: false,\n        modalType: 'primary',\n        user: null,\n    });\n\n    const initialFilters = {\n        page: 1,\n        perPage: 10,\n        name: \"\",\n        phone: \"\",\n        email: \"\",\n        gender: \"\",\n    }\n\n    const [filters, setFilters] = useState(initialFilters);\n\n    useEffect(() => {\n        const fetchData = async () => {\n            await dispatch(fetchPartners(filters))\n        };\n        fetchData().then(r => {});\n    }, [filters]);\n\n    const getPartners = async (page, perPage) => await dispatch(fetchPartners({page, perPage}));\n\n    return (\n        <Main>\n            <PartnerList\n                state={state}\n                setState={setState}\n                isLoading={isLoading}\n                filters={filters}\n                setFilters={setFilters}\n                partners={partners}\n                getPartners={getPartners}\n                approveRequest={approveRequest}\n            />\n            <PartnersFilter\n                filter={filter}\n                state={state}\n                setState={setState}\n                initialFilters={initialFilters}\n                filters={filters}\n                setFilters={setFilters}\n                users={utilitiesPartners}\n                fetchUsers={fetchUtilitiesPartners}\n                isLoading={isLoading}\n            />\n        </Main>\n    )\n}\n\nexport default PartnersData;\n","import actions from './actions'\nimport {RequestService as req} from \"../../../services/requestService\";\nimport { Constants } from \"../../../config/constants\";\n\nconst { fetchPartnersAction } = actions;\n\nexport const fetchPartners = (queries) => {\n    return async dispatch => {\n        await req.getRequest({\n            url: Constants.CLIENTS + 'partners',\n            queries,\n            auth: 'bearer'\n        }, (cb) => dispatch(fetchPartnersAction(cb)))\n    };\n};\n\nexport const approveRequest = (data, action) => {\n    return async dispatch => {\n        await req.putRequest({\n            url: Constants.CLIENTS + 'partners/approve',\n            auth: 'bearer',\n            body: data\n        }, async (cb) => dispatch(fetchPartners({page: 1, perPage: 10})))\n    };\n};\n"],"sourceRoot":""}